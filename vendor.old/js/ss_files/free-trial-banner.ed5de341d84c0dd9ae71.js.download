(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{4105:function(e,n,a){"use strict";a.r(n),a.d(n,"UpsellOverlay",(function(){return t.a})),a.d(n,"FreeTrialBanner",(function(){return M})),a.d(n,"PlanSelectionType",(function(){return y.PlanSelectionType})),a.d(n,"PlanSelectionOverlay",(function(){return y.PlanSelectionOverlay})),a.d(n,"useFreeTrialEligibilityRules",(function(){return x.a}));var t=a(1013),r=a(0),i=a.n(r),o=a(6),l=a.n(o),c=a(9),s=a(24),u=a(141),m=a.n(u),d=a(31),f=a(105),b=a(4),p=a(23),g=a(4970),v=a.n(g),y=a(533),h=a(8),x=a(331),_=a(707),w=a(3),N=a.n(w),j=a(316),C=a(119);function E(e,n,a,t,r,i,o){try{var l=e[i](o),c=l.value}catch(e){return void a(e)}l.done?n(c):Promise.resolve(c).then(t,r)}function T(e){return function(){var n=this,a=arguments;return new Promise((function(t,r){var i=e.apply(n,a);function o(e){E(i,t,r,o,l,"next",e)}function l(e){E(i,t,r,o,l,"throw",e)}o(void 0)}))}}function B(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],t=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(t=(o=l.next()).done)&&(a.push(o.value),!n||a.length!==n);t=!0);}catch(e){r=!0,i=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw i}}return a}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return k(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(a);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return k(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,n){(null==n||n>e.length)&&(n=e.length);for(var a=0,t=new Array(n);a<n;a++)t[a]=e[a];return t}var O=Object(b.forNamespace)("free trial existing"),M=function(e){var n,a,t,o,u,g,w,E=e.orgId,k=B(Object(r.useState)(!1),2),M=k[0],A=k[1],S=function(){return A(!0)},I="free-trial-banner-".concat(E),P="free-trial-banner-confetti-".concat(E),R=B(Object(p.ob)(),1)[0],z=Object(x.a)(E),F=z.isTrialActive,G=z.freeTrialCredit,X=z.isAdmin,D=Object(p.nb)({variables:{orgId:E}}),V=D.data,H=D.loading,U=(null==V||null===(n=V.member)||void 0===n?void 0:n.oneTimeMessagesDismissed)?null==V||null===(a=V.member)||void 0===a?void 0:a.oneTimeMessagesDismissed:[],q=B(Object(r.useState)(0),2),Z=q[0],L=q[1],W=B(Object(r.useState)(0),2),J=W[0],Q=W[1],Y=Object(r.useCallback)((function(){R({variables:{memberId:"me",messageId:P},optimisticResponse:{__typename:"Mutation",addOneTimeMessagesDismissed:{id:"me",oneTimeMessagesDismissed:U.concat([P]),__typename:"Member"}}})}),[U,R,P]),$=U.includes(P);Object(r.useEffect)((function(){Z&&J&&!H&&!$&&(Object(_.default)({angle:N.a.random(0,45),spread:N.a.random(150,180),particleCount:150,origin:{x:0,y:J/window.innerHeight}}),Y())}),[Z,J,H,$,Y]);var K=Object(r.useCallback)((function(e){if(null!==e){var n=e.getBoundingClientRect();L(n.x+n.width/2),Q(n.y+n.height/2)}$&&_.default.reset()}),[$]),ee=null==V||null===(t=V.organization)||void 0===t?void 0:t.displayName,ne=null==V||null===(o=V.organization)||void 0===o?void 0:o.url,ae=null==V||null===(u=V.organization)||void 0===u||null===(g=u.paidAccount)||void 0===g?void 0:g.canRenew;if(!G||U.includes(I)||H||(null==V||null===(w=V.organization)||void 0===w?void 0:w.idEnterprise)||c.dontUpsell)return null;var te=Object(f.c)(G.id),re=G.count,ie=te.setDate(te.getDate()+re),oe=ie&&Object(f.a)(new Date,new Date(ie),!0),le=Math.ceil(oe),ce=m.a.get("simulateExpiredTrial"),se=F&&!ce,ue=function(){var e=T(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=X&&se?"admin":se?"normal":"expired",h.Analytics.sendViewedBannerEvent({bannerName:"freeTrialBanner",source:Object(h.getScreenFromUrl)(),containers:{organization:{id:E}},attributes:{type:n}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=l()(v.a.container,se?v.a.bannerBg:v.a.expiredBg),de=function(){var e=T(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.Analytics.sendDismissedComponentEvent({componentType:"banner",componentName:"freeTrialBanner",source:Object(h.getScreenFromUrl)(),containers:{organization:{id:E}}}),R({variables:{memberId:"me",messageId:I},optimisticResponse:{__typename:"Mutation",addOneTimeMessagesDismissed:{id:"me",oneTimeMessagesDismissed:U.concat([I]),__typename:"Member"}}});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){if(ne){var e="".concat(ne,"/billing"),n=X&&se?"addPaymentButton":"upgradeButton";h.Analytics.sendClickedButtonEvent({buttonName:n,source:"freeTrialBanner",containers:{organization:{id:E}}}),window.location.assign(e)}};if(!X&&!se)return null;ue();return i.a.createElement(j.a,{tags:{ownershipArea:"trello-bizteam",feature:C.Feature.FreeTrialExistingTeam}},i.a.createElement("div",{className:me},i.a.createElement("div",{className:v.a.bcContainer},se?i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{role:"img","aria-label":"confetti",className:v.a.emoji},"ðŸŽ‰"),Object(b.localizeCount)("free-trial-banner-tagline-by-days",le,{teamName:ee,days:i.a.createElement("div",{ref:K,key:ee,className:v.a.daysContainer},le)})):i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{role:"img","aria-label":"wave",className:v.a.emoji},"ðŸ‘‹"),O(["banner","expired tagline"],{teamName:ee}))),i.a.createElement("div",{className:v.a.ctaContainer},se?i.a.createElement(i.a.Fragment,null,X&&!ae?i.a.createElement(i.a.Fragment,null,i.a.createElement("a",{role:"button",className:v.a.learnMoreCta,onClick:function(){h.Analytics.sendClickedLinkEvent({linkName:"learnMoreLink",source:"freeTrialBanner",containers:{organization:{id:E}}}),S()}},Object(b.forNamespace)("learn more button")("")),i.a.createElement(s.Button,{className:v.a.button,appearance:"primary",onClick:fe},O(["banner","add-payment-method"]))):i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Button,{className:v.a.button,appearance:"primary",onClick:function(){h.Analytics.sendClickedButtonEvent({buttonName:"learnMoreButton",source:"freeTrialBanner",containers:{organization:{id:E}}}),S()}},Object(b.forNamespace)("learn more button")("")),i.a.createElement("button",{className:v.a.closeButton,onClick:de},i.a.createElement(d.default,{className:v.a.closeIcon,name:d.IconName.Close,medium:!0})))):i.a.createElement(i.a.Fragment,null,i.a.createElement(s.Button,{className:v.a.button,appearance:"primary",onClick:fe},O(["banner","upgrade"])),i.a.createElement("button",{className:v.a.closeButton,onClick:de},i.a.createElement(d.default,{className:v.a.closeIcon,name:d.IconName.Close,medium:!0}))))),M&&i.a.createElement(y.PlanSelectionOverlay,{orgId:E,onContinue:function(){},onClose:function(){return A(!1)},trialLength:G.count}))}},4970:function(e,n,a){var t=a(4971);"string"==typeof t&&(t=[[e.i,t,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};a(21)(t,r);t.locals&&(e.exports=t.locals)},4971:function(e,n,a){(n=e.exports=a(20)(!1)).push([e.i,"._3QfNAnBeb5MXCS{padding:0 4px 0 16px;height:40px;background-color:rgba(9,30,66,.95);display:flex;align-items:center;justify-content:space-between;line-height:18px;font-weight:600}._5PgQi1bn-4l3qI{margin-right:8px}._1_uAu9Z6xjwuz9{color:#fff;background-color:rgba(9,30,66,.95)}._1qjssZ1iwLuaP5{color:#172b4d;background-color:#d6ecd2}._1ta38j4GmHUsTw{display:flex;flex-direction:row;align-items:center}.WMV_Nnak6jlW5q{display:flex;justify-content:center;align-items:center;background-color:#42526e;border-radius:3px;width:24px;height:24px;margin:0 4px}._8xBegbhXb5B02c{display:flex;flex-direction:row}._8xBegbhXb5B02c a{display:flex;align-items:center;margin-right:8px;-webkit-text-decoration-line:underline;text-decoration-line:underline;font-size:12px;line-height:16px;font-weight:500;cursor:pointer}._1XazycWMJxPXZ7{color:#a5adba}._1XazycWMJxPXZ7:hover{color:#fff}._2T9VGoSVwTCClN{color:#172b4d}._3Ma7XvbkR__6ZG{margin:0}._1v8GVHyNTRAG1m{margin:0;padding:0}._1v8GVHyNTRAG1m,._1v8GVHyNTRAG1m:hover{background-color:transparent}._1a2N7Y8vuH0tha{margin-left:2px;color:#42526e}._1a2N7Y8vuH0tha:hover{color:#fff}._1SLq6R5EvPUlFj{margin-left:2px;color:#6b778c}._1SLq6R5EvPUlFj:hover{color:#42526e}",""]),n.locals={container:"_3QfNAnBeb5MXCS",emoji:"_5PgQi1bn-4l3qI",bannerBg:"_1_uAu9Z6xjwuz9",expiredBg:"_1qjssZ1iwLuaP5",bcContainer:"_1ta38j4GmHUsTw",daysContainer:"WMV_Nnak6jlW5q",ctaContainer:"_8xBegbhXb5B02c",learnMoreCta:"_1XazycWMJxPXZ7",sendFeedbackCta:"_2T9VGoSVwTCClN",button:"_3Ma7XvbkR__6ZG",closeButton:"_1v8GVHyNTRAG1m",closeIcon:"_1a2N7Y8vuH0tha",expiredCloseIcon:"_1SLq6R5EvPUlFj"}}}]);
//# sourceMappingURL=free-trial-banner.ed5de341d84c0dd9ae71.js.map