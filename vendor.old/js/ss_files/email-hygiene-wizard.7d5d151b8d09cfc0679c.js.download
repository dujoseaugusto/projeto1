(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{4858:function(e,t,n){var a=n(4859);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(21)(a,i);a.locals&&(e.exports=a.locals)},4859:function(e,t,n){(t=e.exports=n(20)(!1)).push([e.i,"._3Ix0WjhiPcwnS2{padding:12px;color:#5e6c84}._3Ix0WjhiPcwnS2 input{width:100%}._3Ix0WjhiPcwnS2 button{width:100%;margin:16px 0 0}.jdTcFpD3-nI6Sm{margin:16px 0 8px;font-weight:700;font-size:14px;color:#172b4d}._1NYql4rFP67pCj{margin:8px 0;font-weight:700;color:#b04632}",""]),t.locals={popoverContent:"_3Ix0WjhiPcwnS2",popoverLabel:"jdTcFpD3-nI6Sm",popoverError:"_1NYql4rFP67pCj"}},4903:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var a=n(0),i=n.n(a),r=n(6),o=n.n(r),l=n(26),c=n(4),s=n(24),m=n(252),u=n(977),d=n(47),f=n(4858),p=n.n(f);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var h=Object(c.forNamespace)(["email hygiene wizard","change email"],{shouldEscapeStrings:!1}),E=function(e){var t=e.disabled,n=void 0!==t&&t,r=e.onSubmitEmail,c=void 0===r?function(e){}:r,f=e.isSendingRequest,y=e.emailError,E=e.onTogglePopover,x=e.emailPlaceholder,v=void 0===x?"":x,S=e.children,I=b(Object(a.useState)(v),2),_=I[0],w=I[1],C=Object(s.usePopover)({onHide:function(){E(!1)},onShow:function(){E(!0)}}),O=C.popoverProps,k=C.toggle,N=C.triggerRef;return i.a.createElement(i.a.Fragment,null,i.a.createElement(l.a,{onClick:k,ref:N,disabled:n},S),i.a.createElement(s.Popover,g({},O,{title:h("title")}),i.a.createElement("div",{className:p.a.popoverContent},i.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c(_)}},i.a.createElement("div",null,h("main-message"),f&&i.a.createElement(d.a,{small:!0,inline:!0,wrapperClassName:o()(p.a.spinner,p.a.floating)})),y&&i.a.createElement(m.a,{error:y,email:_},(function(e){return i.a.createElement("p",{className:p.a.popoverError},e)})),i.a.createElement("label",{htmlFor:"email",className:p.a.popoverLabel},h("email-label")),i.a.createElement("input",{id:"email",type:"email",name:"email",value:_,ref:function(e){return e&&e.focus()},onChange:function(e){return w(e.target.value)},disabled:f}),i.a.createElement(u.a,{disabled:f||0===_.length,onClick:function(e){e.preventDefault(),c(_)}},h("send-confirmation-button"))))))}},5413:function(e,t,n){var a=n(5414);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(21)(a,i);a.locals&&(e.exports=a.locals)},5414:function(e,t,n){(t=e.exports=n(20)(!1)).push([e.i,"._1Dbb-l8DNDyVAN{display:flex;flex:1;flex-direction:column;max-height:328px}._1Dbb-l8DNDyVAN ._3-VHJ_kZ5G2dj3{display:flex;flex-direction:column;overflow-y:auto}._3Etz3HivVa2Zk5{margin-top:30px}._3Etz3HivVa2Zk5 button{margin-right:8px}._1T5hHwETtRj3Tm{display:inline-block}._1T5hHwETtRj3Tm._3MRtHlF2pTJIoE{float:right}@media only screen and (max-width:1020px){._2MSQJuPlNxzcnq{width:100%;min-width:375px}}._3f55SJ0Bgrj2sl{font-weight:600;margin-bottom:14px}._9a90bN-_o19zjH{margin-top:12px}.EI2cN8mmYjcC2z{color:#172b4d;font-weight:400;font-size:14px;display:inline-flex;cursor:pointer;margin-bottom:0;width:100%;flex-direction:row;align-items:center}input.VSYngck4pN55Ej{box-shadow:none;margin:0;-webkit-appearance:radio;-moz-appearance:radio;appearance:radio;display:inline-block}.XFHcjFSq0Is-sY{display:inline-block;margin-left:10px;max-width:75%;overflow-wrap:break-word}._3TZtdwCpLr20xP{font-size:12px;color:#fff;background-color:#505f79;border-radius:4px;display:inline-block;margin-left:8px;padding:1px 5px}._3zhE8NzbRC03H6{display:inline-block;margin-top:12px;color:#5e6c84}._2QC1fTDOKnM7xW{margin-left:5px}._1nSR9KYJJionLL{padding:12px;color:#5e6c84}._1nSR9KYJJionLL a{display:inline-block;margin-left:5px;color:#172b4d}._1nSR9KYJJionLL button{width:100%;margin:16px 0 0}",""]),t.locals={content:"_1Dbb-l8DNDyVAN",description:"_3-VHJ_kZ5G2dj3",buttons:"_3Etz3HivVa2Zk5",spinner:"_1T5hHwETtRj3Tm",floating:"_3MRtHlF2pTJIoE",illustration:"_2MSQJuPlNxzcnq",highlightedMessage:"_3f55SJ0Bgrj2sl",emailList:"_9a90bN-_o19zjH",emailLabel:"EI2cN8mmYjcC2z",emailRadio:"VSYngck4pN55Ej",emailValue:"XFHcjFSq0Is-sY",primaryEmail:"_3TZtdwCpLr20xP",showMoreEmails:"_3zhE8NzbRC03H6",showMoreEmailsIcon:"_2QC1fTDOKnM7xW",popoverContent:"_1nSR9KYJJionLL"}},5415:function(e,t,n){var a=n(5416);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(21)(a,i);a.locals&&(e.exports=a.locals)},5416:function(e,t,n){(t=e.exports=n(20)(!1)).push([e.i,".t8VDpqjw9E5O9W{display:flex;flex:1;flex-direction:column;max-height:328px}.t8VDpqjw9E5O9W .HM8uxHzKixMeaH{display:flex;flex-direction:column;overflow-y:auto}._3XQYq9mYX4B3Ue{margin-top:30px}._3XQYq9mYX4B3Ue button{margin-right:8px}._3JCflh3VaFQlZE{display:inline-block}._3JCflh3VaFQlZE._3SiiPGhC7KhlLO{float:right}@media only screen and (max-width:1020px){._1kfYlxui8ROGy3{width:100%;min-width:375px}}._1WrF7j-8jTcRuC strong{overflow-wrap:break-word}",""]),t.locals={content:"t8VDpqjw9E5O9W",description:"HM8uxHzKixMeaH",buttons:"_3XQYq9mYX4B3Ue",spinner:"_3JCflh3VaFQlZE",floating:"_3SiiPGhC7KhlLO",illustration:"_1kfYlxui8ROGy3",mainMessage:"_1WrF7j-8jTcRuC"}},5417:function(e,t,n){var a=n(5418);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(21)(a,i);a.locals&&(e.exports=a.locals)},5418:function(e,t,n){(t=e.exports=n(20)(!1)).push([e.i,"._1EL7YFf08eoGe2{display:flex;flex:1;flex-direction:column;max-height:328px}._1EL7YFf08eoGe2 ._3HzVvHL1KdmG_u{display:flex;flex-direction:column;overflow-y:auto}.BIext9ryQRbBt4{margin-top:30px}.BIext9ryQRbBt4 button{margin-right:8px}._2yRoW8hK-N6IvF{display:inline-block}._2yRoW8hK-N6IvF._1_nXIP1kuszIo_{float:right}@media only screen and (max-width:1020px){._1-a1sqQI-Z91oT{width:100%;min-width:375px}}._2BIoixnIuL9BgC strong{overflow-wrap:break-word}",""]),t.locals={content:"_1EL7YFf08eoGe2",description:"_3HzVvHL1KdmG_u",buttons:"BIext9ryQRbBt4",spinner:"_2yRoW8hK-N6IvF",floating:"_1_nXIP1kuszIo_",illustration:"_1-a1sqQI-Z91oT",mainMessage:"_2BIoixnIuL9BgC"}},5419:function(e,t,n){var a=n(5420);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(21)(a,i);a.locals&&(e.exports=a.locals)},5420:function(e,t,n){(t=e.exports=n(20)(!1)).push([e.i,"._1Tlr67Z5M2Owop{display:flex;flex:1;flex-direction:column;max-height:328px}._1Tlr67Z5M2Owop ._3jHjdJOzkISiRV{display:flex;flex-direction:column;overflow-y:auto}._2VPOsy_tM57dvF{margin-top:30px}._2VPOsy_tM57dvF button{margin-right:8px}._3ydrIfjSikXRym{display:inline-block}._3ydrIfjSikXRym.kuRuh4w5gcw_V6{float:right}@media only screen and (max-width:1020px){._1mweaQbKcE7MuW{width:100%;min-width:375px}}._2J50ANpW8e-aZO{padding:16px;background-color:#fafbfc;border:2px solid #dfe1e6;margin-top:16px;margin-bottom:16px;border-radius:3px}._1ChMXJ4xMBcLkN{font-size:14px;line-height:20px;overflow-wrap:break-word}._2FTSsStl-UH4bC{color:#5e6c84;font-size:12px;line-height:16px}",""]),t.locals={content:"_1Tlr67Z5M2Owop",description:"_3jHjdJOzkISiRV",buttons:"_2VPOsy_tM57dvF",spinner:"_3ydrIfjSikXRym",floating:"kuRuh4w5gcw_V6",illustration:"_1mweaQbKcE7MuW",singleEmailItem:"_2J50ANpW8e-aZO",singleEmailValue:"_1ChMXJ4xMBcLkN",singleEmailTimestamp:"_2FTSsStl-UH4bC"}},5421:function(e,t,n){var a=n(5422);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(21)(a,i);a.locals&&(e.exports=a.locals)},5422:function(e,t,n){(t=e.exports=n(20)(!1)).push([e.i,"._294FtkOLxs4S9e{display:flex;flex:1;flex-direction:column;max-height:328px}._294FtkOLxs4S9e .xKmvmzV3nRUnXf{display:flex;flex-direction:column;overflow-y:auto}._1zKmhZ3mkDSKuk{margin-top:30px}._1zKmhZ3mkDSKuk button{margin-right:8px}.HvMeQqpPzz7UCs{display:inline-block}.HvMeQqpPzz7UCs._18D85L9mNV6Opx{float:right}@media only screen and (max-width:1020px){.YxNo9pN46bRPQ2{width:100%;min-width:375px}}._10SUbZGkSYwm4H{margin-bottom:18px;font-size:20px;font-weight:500}",""]),t.locals={content:"_294FtkOLxs4S9e",description:"xKmvmzV3nRUnXf",buttons:"_1zKmhZ3mkDSKuk",spinner:"HvMeQqpPzz7UCs",floating:"_18D85L9mNV6Opx",illustration:"YxNo9pN46bRPQ2",errorMessage:"_10SUbZGkSYwm4H"}},5423:function(e,t,n){var a=n(5424);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(21)(a,i);a.locals&&(e.exports=a.locals)},5424:function(e,t,n){(t=e.exports=n(20)(!1)).push([e.i,"._38unXsueph04lU{display:flex;flex:1;flex-direction:column;max-height:328px}._38unXsueph04lU ._2tzXKTVY_zD3i6{display:flex;flex-direction:column;overflow-y:auto}._1KPkYH_Sb0kcfh{margin-top:30px}._1KPkYH_Sb0kcfh button{margin-right:8px}._1QRgyQHD0lL8Wh{display:inline-block}._1QRgyQHD0lL8Wh._2Z97cfyLc5VTad{float:right}@media only screen and (max-width:1020px){._12RMJUudVAKIRT{width:100%;min-width:375px}}",""]),t.locals={content:"_38unXsueph04lU",description:"_2tzXKTVY_zD3i6",buttons:"_1KPkYH_Sb0kcfh",spinner:"_1QRgyQHD0lL8Wh",floating:"_2Z97cfyLc5VTad",illustration:"_12RMJUudVAKIRT"}},5425:function(e,t,n){var a=n(5426);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(21)(a,i);a.locals&&(e.exports=a.locals)},5426:function(e,t,n){(t=e.exports=n(20)(!1)).push([e.i,"._2FreGpDnaUoCqJ{display:flex;flex:1;flex-direction:column;max-height:328px}._2FreGpDnaUoCqJ ._30Ggbi1HrPNpvT{display:flex;flex-direction:column;overflow-y:auto}._3vJq2deHZJWJrv{margin-top:30px}._3vJq2deHZJWJrv button{margin-right:8px}._1ZXbN5V9v_yHEm{display:inline-block}._1ZXbN5V9v_yHEm._2zWN4ypN7CD4bk{float:right}@media only screen and (max-width:1020px){._3x4GInExLo0xNd{width:100%;min-width:375px}}.ae-gMVDoFT_AD4 strong{overflow-wrap:break-word}",""]),t.locals={content:"_2FreGpDnaUoCqJ",description:"_30Ggbi1HrPNpvT",buttons:"_3vJq2deHZJWJrv",spinner:"_1ZXbN5V9v_yHEm",floating:"_2zWN4ypN7CD4bk",illustration:"_3x4GInExLo0xNd",mainMessage:"ae-gMVDoFT_AD4"}},5427:function(e,t,n){var a=n(5428);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(21)(a,i);a.locals&&(e.exports=a.locals)},5428:function(e,t,n){(t=e.exports=n(20)(!1)).push([e.i,".dU2gVxeagnL3cT{display:flex;flex:1;flex-direction:column;max-height:328px}.dU2gVxeagnL3cT .kdj-Rh-tvV6_ci{display:flex;flex-direction:column;overflow-y:auto}.IsTLO2IuSBhwU8{margin-top:30px}.IsTLO2IuSBhwU8 button{margin-right:8px}.yFdUt7IDPmJ-DH{display:inline-block}.yFdUt7IDPmJ-DH._2fxjU1CxRuHoG9{float:right}@media only screen and (max-width:1020px){._1Afz8SdJ11Curv{width:100%;min-width:375px}}",""]),t.locals={content:"dU2gVxeagnL3cT",description:"kdj-Rh-tvV6_ci",buttons:"IsTLO2IuSBhwU8",spinner:"yFdUt7IDPmJ-DH",floating:"_2fxjU1CxRuHoG9",illustration:"_1Afz8SdJ11Curv"}},5429:function(e,t,n){e.exports=n.p+"images/email-hygiene-wizard/illustration-atlassian.b54ec6dd8119bef4d213.svg"},5430:function(e,t,n){e.exports=n.p+"images/email-hygiene-wizard/illustration-atlassian-mobile.71eadc4e284264ed78ca.svg"},5431:function(e,t,n){e.exports=n.p+"images/email-hygiene-wizard/illustration-main.f756d71fba7720da42f0.svg"},5432:function(e,t,n){e.exports=n.p+"images/email-hygiene-wizard/illustration-main-mobile.cfb233bb205cbe879583.svg"},5433:function(e,t,n){e.exports=n.p+"images/email-hygiene-wizard/illustration-email.f5bfd1f807d345c61e4c.svg"},5434:function(e,t,n){e.exports=n.p+"images/email-hygiene-wizard/illustration-ok.918fe795af7239acb0e1.svg"},5435:function(e,t,n){e.exports=n.p+"images/email-hygiene-wizard/illustration-ok-mobile.ea040e21ea69624e720b.svg"},5588:function(e,t,n){"use strict";n.r(t),n.d(t,"illustrations",(function(){return de})),n.d(t,"ScreenType",(function(){return ue})),n.d(t,"fetchIllustration",(function(){return be})),n.d(t,"EmailHygieneWizard",(function(){return ye}));var a=n(0),i=n.n(a),r=n(1),o=n(8),l=n(23),c=n(4),s=n(4903),m=n(252),u=n(646),d=n(1406),f=n(6),p=n.n(f),g=n(26),b=n(31),y=n(24),h=n(47),E=n(498),x=Object(c.forNamespace)(["email hygiene wizard","dialog"],{shouldEscapeStrings:!1}),v=function(e){var t=e.title,n=e.children,l=e.closeDialog,c=e.isCentered,s=e.image,m=e.mobileImage,d=e.onKeyPressCapture,f=e.analyticsContext,p=e.analyticsSource,g=Object(a.useCallback)((function(){Object(u.a)({action:o.Action.clicked,actionSubject:o.ActionSubject.link,actionSubjectId:o.ActionSubjectId.emailHygieneTransferBoardsFooterLink,method:"by clicking the transfer boards link",noun:r.Noun.LINK,source:p,verb:r.Verb.CLICKS,context:f})}),[p,f]),b=Object(a.useCallback)((function(){l(),Object(u.a)({verb:r.Verb.DISMISSES,noun:r.Noun.EMAIL_HYGIENE_WIZARD,method:"by manually closing the dialog",context:f,source:p,action:o.Action.closed,actionSubject:o.ActionSubject.overlay,actionSubjectId:o.ActionSubjectId.emailHygieneWizard})}),[l,p,f]);return i.a.createElement(E.a,{title:t,tip:i.a.createElement(i.a.Fragment,null,x("tip-text",{transferYourBoardsLink:i.a.createElement("a",{href:"/support/transfer-boards",key:"transfer-link",onClick:g,target:"_blank"},x("transfer-your-boards-link"))})),closeDialog:b,isCentered:c,image:s,mobileImage:m,onKeyPressCapture:d},n)},S=n(5413),I=n.n(S);function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var O=Object(c.forNamespace)(["email hygiene wizard","choose email screen"],{shouldEscapeStrings:!1}),k=function(e){var t=e.logins,n=e.onDismiss,l=e.selectedLogin,c=e.isSendingRequest,s=e.isSendingRemoveEmailsRequest,m=e.onSelectLogin,d=e.onClickConfirm,f=e.onRemoveSecondaryEmails,E=e.image,x=e.mobileImage,S=e.analyticsContext,C=e.analyticsSource,k=w(Object(a.useState)(!1),2),N=k[0],j=k[1],R=Object(y.usePopover)({onShow:function(){Object(u.b)(o.Source.emailHygieneRemoveSecondaryEmailsInlineDialog,S)}}),M=R.popoverProps,L=R.toggle,A=R.triggerRef,H=Object(a.useCallback)((function(){f(),Object(u.a)({verb:r.Verb.REMOVES,noun:r.Noun.EMAIL,method:"by clicking remove secondary emails button",context:S,source:o.Source.emailHygieneRemoveSecondaryEmailsInlineDialog,action:o.Action.clicked,actionSubject:o.ActionSubject.button,actionSubjectId:o.ActionSubjectId.emailHygieneWizardRemoveSecondaryEmailsButton})}),[f,S]),D=N||t.length<=5?t:t.slice(0,4),z=t.length-D.length;return i.a.createElement(v,{closeDialog:n,title:O("title"),image:E,mobileImage:x,onKeyPressCapture:function(e){"Enter"!==e.key||c||M.isVisible||d()},analyticsContext:S,analyticsSource:C},i.a.createElement("p",null,O("main-message")),i.a.createElement("p",null,O("select-email-text")),i.a.createElement("div",{className:I.a.emailList},D.map((function(e,t){return i.a.createElement("div",{key:"email".concat(t)},i.a.createElement("label",{className:I.a.emailLabel},i.a.createElement("input",{type:"radio",className:I.a.emailRadio,disabled:c||s,checked:!!l&&e.email===l.email,onChange:function(){return m(e)}}),i.a.createElement("span",{className:I.a.emailValue},e.email),e.primary&&i.a.createElement("span",{className:I.a.primaryEmail},O("primary-label"))))})),z>0&&i.a.createElement("div",null,i.a.createElement("a",{href:"#",className:I.a.showMoreEmails,onClick:function(e){e.preventDefault(),j(!0)}},O("show-more-link",{amount:z}),i.a.createElement(b.default,{name:b.IconName.Down,small:!0,className:I.a.showMoreEmailsIcon})))),i.a.createElement("div",{className:I.a.buttons},i.a.createElement(g.g,{disabled:c||s,onClick:d},O("continue-button")),i.a.createElement(g.a,{onClick:L,disabled:c,ref:A},O("use-different-email")),i.a.createElement(y.Popover,_({},M,{title:O("use-different-email")}),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:I.a.popoverContent},O("remove-secondary-addresses-text"),i.a.createElement("a",{href:"https://help.trello.com/article/773-adding-account-credentials",target:"_blank"},O("remove-secondary-addresses-link-text")),s&&i.a.createElement(h.a,{small:!0,inline:!0,wrapperClassName:p()(I.a.spinner,I.a.floating)}),i.a.createElement(g.g,{onClick:H,disabled:s},O("remove-secondary-addresses-button"))))),c&&i.a.createElement(h.a,{small:!0,wrapperClassName:I.a.spinner})))},N=n(5415),j=n.n(N),R=Object(c.forNamespace)(["email hygiene wizard","claimable info screen"],{shouldEscapeStrings:!1}),M=function(e){var t=e.email,n=e.isSendingRequest,a=e.onDismiss,r=e.onClickConfirm,o=e.onClickBack,l=e.image,c=e.mobileImage,s=e.analyticsContext,m=e.analyticsSource,u=t.split("@")[1];return i.a.createElement(v,{closeDialog:a,title:R("title"),image:l,mobileImage:c,onKeyPressCapture:function(e){"Enter"!==e.key||n||r()},analyticsContext:s,analyticsSource:m},i.a.createElement("div",{className:j.a.content},i.a.createElement("div",{className:j.a.description},i.a.createElement("p",{className:j.a.mainMessage},R("main-message",{domain:i.a.createElement("strong",{key:"domain-main"},u),email:i.a.createElement("strong",{key:"email-main"},t)})),i.a.createElement("p",{className:j.a.mainMessage},R("secondary-message",{domain:i.a.createElement("strong",{key:"domain-secondary"},u),domain2:i.a.createElement("strong",{key:"domain2-secondary"},u)})),i.a.createElement("p",{className:j.a.mainMessage},R("tertiary-message",{email:i.a.createElement("strong",{key:"email-tertiary"},t)}))),i.a.createElement("div",{className:j.a.buttons},i.a.createElement(g.g,{onClick:r,disabled:n},R("use-email-button")),i.a.createElement(g.a,{onClick:o,disabled:n},R("different-email-button")),n&&i.a.createElement(h.a,{small:!0,inline:!0,wrapperClassName:j.a.spinner}))))},L=n(5417),A=n.n(L),H=Object(c.forNamespace)(["email hygiene wizard","confirmation email sent screen"],{shouldEscapeStrings:!1}),D=function(e){var t=e.email,n=e.onDismiss,a=e.changeEmailButton,r=e.image,o=e.mobileImage,l=e.analyticsContext,c=e.analyticsSource;return i.a.createElement(v,{closeDialog:n,title:H("title"),image:r,mobileImage:o,analyticsContext:l,analyticsSource:c},i.a.createElement("p",{className:A.a.mainMessage},H("main-message",{email:i.a.createElement("strong",{key:"email"},t)})),i.a.createElement("p",null,H("secondary-message")),i.a.createElement("div",{className:A.a.buttons},i.a.createElement(g.g,{onClick:n},H("ok-button")),a))},z=n(105),T=n(980),F=n(5419),P=n.n(F),V=Object(c.forNamespace)(["email hygiene wizard","confirm single email screen"],{shouldEscapeStrings:!1}),J=function(e){var t=e.login,n=e.isSendingRequest,r=e.isSendingNewEmailRequest,l=e.isPopoverShown,c=e.onDismiss,s=e.onClickConfirm,m=e.changeEmailButton,d=e.image,f=e.mobileImage,p=e.analyticsContext,b=e.analyticsSource;return Object(a.useEffect)((function(){l&&Object(u.b)(o.Source.emailHygieneChangeEmailInlineDialog,p)}),[l,p]),i.a.createElement(v,{closeDialog:c,title:V("title"),image:d,mobileImage:f,onKeyPressCapture:function(e){"Enter"!==e.key||n||l||s()},analyticsContext:p,analyticsSource:b},V("main-message"),i.a.createElement("div",{className:P.a.singleEmailItem},i.a.createElement("div",{className:P.a.singleEmailValue},t.email),i.a.createElement("div",{className:P.a.singleEmailTimestamp},V("added-date",{date:Object(T.a)(Object(z.c)(t.id),new Date)}))),i.a.createElement("div",{className:P.a.buttons},i.a.createElement(g.g,{onClick:s,disabled:n||r},V("use-email-button")),m,n&&i.a.createElement(h.a,{small:!0,inline:!0,wrapperClassName:P.a.spinner})))},B=n(5421),K=n.n(B),U=Object(c.forNamespace)(["email hygiene wizard","error screen"],{shouldEscapeStrings:!1}),q=function(e){var t=e.onDismiss,n=e.onClickBack,a=e.image,r=e.mobileImage,o=e.analyticsContext,l=e.analyticsSource;return i.a.createElement(v,{closeDialog:t,title:U("title"),image:a,mobileImage:r,isCentered:!0,analyticsContext:o,analyticsSource:l},i.a.createElement("h3",{className:K.a.errorMessage},U("main-message")),i.a.createElement("p",null,U("secondary-message")),i.a.createElement("div",{className:K.a.buttons},i.a.createElement(g.g,{onClick:n},U("start-over-button"))))},W=n(5423),G=n.n(W),Y=Object(c.forNamespace)(["email hygiene wizard","intro screen"],{shouldEscapeStrings:!1}),Z=function(e){var t=e.onClickContinue,n=e.onDismiss,a=e.image,l=e.mobileImage,c=e.analyticsContext,s=e.analyticsSource,m=e.onSnooze;return i.a.createElement(v,{closeDialog:n,title:Y("title"),image:a,mobileImage:l,analyticsContext:c,analyticsSource:s},i.a.createElement("p",{className:G.a.mainMessage},Y("main-message")),i.a.createElement("p",null,Y("secondary-message")," ",i.a.createElement("a",{href:"https://help.trello.com/article/1197-using-trello-with-an-atlassian-account",target:"_blank"},Y("learn-more-link"))),i.a.createElement("p",{className:G.a.mainMessage},Y("tertiary-message")),i.a.createElement("div",{className:G.a.buttons},i.a.createElement(g.g,{onClick:t},Y("continue-button")),m&&i.a.createElement(g.a,{onClick:function(){m&&(m(),Object(u.a)({verb:r.Verb.DISMISSES,noun:r.Noun.EMAIL_HYGIENE_WIZARD,method:"by clicking remind me later button",context:c,source:s,action:o.Action.clicked,actionSubject:o.ActionSubject.button,actionSubjectId:o.ActionSubjectId.emailHygieneWizardDismissLink}))}},Y("snooze-button"))))},Q=n(5425),X=n.n(Q),$=Object(c.forNamespace)(["email hygiene wizard","success screen"],{shouldEscapeStrings:!1}),ee=function(e){var t=e.email,n=e.onDismiss,a=e.image,r=e.mobileImage,o=e.analyticsContext,l=e.analyticsSource;return i.a.createElement(v,{closeDialog:n,title:$("title"),image:a,mobileImage:r,analyticsContext:o,analyticsSource:l},i.a.createElement("p",{className:X.a.mainMessage},$("main-message",{email:i.a.createElement("strong",{key:"email"},t)})),i.a.createElement("p",null,$("secondary-message",{yourProfileLink:i.a.createElement("a",{href:"/me",key:"profile-link"},$("your-profile-link"))})),i.a.createElement("div",{className:X.a.buttons},i.a.createElement(g.g,{onClick:n},$("done-button"))))},te=n(5427),ne=n.n(te),ae=n(604);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,r=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function se(e,t,n,a,i,r,o){try{var l=e[r](o),c=l.value}catch(e){return void n(e)}l.done?t(c):Promise.resolve(c).then(a,i)}function me(e){return function(){var t=this,n=arguments;return new Promise((function(a,i){var r=e.apply(t,n);function o(e){se(r,a,i,o,l,"next",e)}function l(e){se(r,a,i,o,l,"throw",e)}o(void 0)}))}}var ue,de={intro:{full:n(5429),mobile:n(5430)},main:{full:n(5431),mobile:n(5432)},email:{full:n(5433),mobile:n(1492)},success:{full:n(5434),mobile:n(5435)}};!function(e){e.INTRO="intro",e.CHOOSE_EMAIL="chooseEmail",e.CONFIRM_SINGLE_EMAIL="confirmSingleEmail",e.CONFIRMATION_EMAIL_SENT="confirmationEmailSent",e.CLAIMABLE_INFO="claimableInfo",e.SUCCESS="success",e.ERROR="error",e.MIGRATION="migration"}(ue||(ue={}));var fe=Object(c.forNamespace)(["email hygiene wizard","dialog"],{shouldEscapeStrings:!1}),pe=function(){var e=me(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.fetch(t);case 2:if(!(null==(n=e.sent)?void 0:n.ok)){e.next=5;break}return e.abrupt("return",n.text());case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=new Map,be=function(e,t,n){var a="".concat(e,"-").concat(t||"","-").concat(n||""),i=ge.get(a);if(i)return i;var r=document.createElement("div");return r.className=ne.a.illustration,ge.set(a,r),pe(e).then((function(e){e&&(r.innerHTML=e,function(e,t,n){var a=e.querySelector(".replace-avatar");if(n)a&&a.setAttribute("xlink:href","".concat(n,"/170.png"));else{if(t){var i=e.querySelector(".replace-initials");i&&(i.innerHTML=t)}a&&a.remove()}}(r,t,n))})),r},ye=function(e){var t=e.analyticsContext,n=e.name,c=e.avatarUrl,f=e.initials,p=e.logins,g=e.hasTwoFactor,b=e.updateByMonth,y=e.onComplete,h=e.onDismiss,E=e.onSnooze,x=le(Object(a.useState)(null),2),v=x[0],S=x[1],I=le(Object(a.useState)(!1),2),_=I[0],w=I[1],C=le(Object(a.useState)(ue.INTRO),2),O=C[0],N=C[1],j=le(Object(a.useState)(m.b.None),2),R=j[0],L=j[1],A=le(Object(a.useState)(),2),H=A[0],z=A[1],T=le(Object(a.useState)(""),2),F=T[0],P=T[1],V=!!H,B=Object(a.useCallback)((function(e){return be(e,f,c)}),[f,c]);Object(a.useEffect)((function(){B(de.main.full),B(de.email.full),B(de.success.full),B(de.main.mobile),B(de.email.mobile),B(de.success.mobile)})),Object(a.useEffect)((function(){if(!V){var e=p.find((function(e){return e.primary}))||p[0];z(e)}}),[V,p]);var K=le(Object(l.fc)(),2),U=K[0],W=K[1],G=le(Object(l.fc)(),2),Y=G[0],Q=G[1],X=le(Object(l.ib)(),2),$=X[0],te=X[1],ne=le(Object(a.useState)(!1),2),ie=ne[0],oe=ne[1],ce=O;ce!==ue.CHOOSE_EMAIL&&ce!==ue.CONFIRM_SINGLE_EMAIL||(ce=p.length>1?ue.CHOOSE_EMAIL:ue.CONFIRM_SINGLE_EMAIL);var se=function(e){switch(e){case ue.INTRO:return o.Source.emailHygieneAtlassianTrelloScreen;case ue.CHOOSE_EMAIL:return o.Source.emailHygieneChooseEmailScreen;case ue.CLAIMABLE_INFO:return o.Source.emailHygieneClaimableWarningScreen;case ue.CONFIRMATION_EMAIL_SENT:return o.Source.emailHygieneConfirmationSentScreen;case ue.CONFIRM_SINGLE_EMAIL:return o.Source.emailHygieneConfirmEmailScreen;case ue.MIGRATION:return o.Source.emailHygieneAaMigrationScreen;case ue.ERROR:return o.Source.emailHygieneErrorScreen;case ue.SUCCESS:return o.Source.emailHygieneThanksScreen;default:return o.Source.unknown}}(ce);Object(a.useEffect)((function(){Object(u.b)(se,t)}),[se,t]);var pe=function(e){z(e),Object(u.a)({verb:r.Verb.SETS,noun:r.Noun.EMAIL,method:"by selecting the email from a list",context:t,source:se,action:o.Action.clicked,actionSubject:o.ActionSubject.radioButton,actionSubjectId:o.ActionSubjectId.emailHygieneWizardEmailItem})},ge=Object(a.useCallback)((function(){y(),Object(u.a)({verb:r.Verb.COMPLETES,noun:r.Noun.EMAIL_HYGIENE_WIZARD,method:"by dismissing the final screen",context:t,source:se,action:o.Action.closed,actionSubject:o.ActionSubject.overlay,actionSubjectId:o.ActionSubjectId.emailHygieneWizard})}),[y,se,t]),ye=function(){var e=me(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,d.b.migrate();case 3:(t=e.sent)?(S(t),N(ue.MIGRATION)):N(ue.SUCCESS),w(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){if(!H)throw new Error("No email selected");var e=p.filter((function(e){return e.id!==H.id})).map((function(e){return e.id}));U({variables:{memberId:"me",primaryLoginId:H.id,removeLoginIds:e,dismissMessage:ae.b}}).then(ye,(function(e){console.error("Failed to perform hygiene",e),N(ue.ERROR)}))},Ee=function(){if(!H)throw new Error("No email selected");H.claimable?N(ue.CLAIMABLE_INFO):he()},xe=function(){var e=me(regeneratorRuntime.mark((function e(n){var a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H){e.next=2;break}throw new Error("No email selected");case 2:return L(m.b.None),e.prev=3,e.next=6,$({variables:{loginId:H.id,email:n,dismissMessage:ae.a}});case 6:P(n),N(ue.CONFIRMATION_EMAIL_SENT),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(3),a=e.t0.networkError?e.t0.networkError.message:e.t0.message,(i=Object(m.c)(a))?L(i):(console.error("Failed to change email",e.t0),N(ue.ERROR));case 15:Object(u.a)({verb:r.Verb.CHANGES,noun:r.Noun.EMAIL,method:"by clicking change email button",context:re({},t,{dialogScreen:se}),source:o.Source.emailHygieneChangeEmailInlineDialog,action:o.Action.clicked,actionSubject:o.ActionSubject.button,actionSubjectId:o.ActionSubjectId.emailHygieneWizardChangeEmailButton});case 16:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),ve=W.loading||_,Se=i.a.createElement(s.a,{disabled:ve,onTogglePopover:oe,isSendingRequest:te.loading,onSubmitEmail:xe,emailError:R},fe("change-email"));switch(ce){case ue.INTRO:return i.a.createElement(Z,{image:B(de.intro.full),mobileImage:B(de.intro.mobile),onDismiss:h,onClickContinue:function(){return N(ue.CHOOSE_EMAIL)},analyticsContext:t,analyticsSource:se,onSnooze:E});case ue.CHOOSE_EMAIL:return i.a.createElement(k,{name:n,image:B(de.main.full),mobileImage:B(de.main.mobile),onDismiss:h,logins:p,updateByMonth:b,isSendingRequest:ve,onClickConfirm:Ee,selectedLogin:H,onSelectLogin:pe,isSendingRemoveEmailsRequest:Q.loading,onRemoveSecondaryEmails:function(){if(!H)throw new Error("No email selected");var e=p.filter((function(e){return e.id!==H.id})).map((function(e){return e.id}));Y({variables:{memberId:"me",primaryLoginId:H.id,removeLoginIds:e}}).then((function(){return N(ue.CONFIRM_SINGLE_EMAIL)}),(function(e){console.error("Failed to perform hygiene",e),N(ue.ERROR)}))},analyticsContext:t,analyticsSource:se});case ue.CONFIRM_SINGLE_EMAIL:return i.a.createElement(J,{name:n,image:B(de.main.full),mobileImage:B(de.main.mobile),onDismiss:h,isSendingRequest:ve,isSendingNewEmailRequest:te.loading,isPopoverShown:ie,onSelectLogin:pe,login:p[0],onClickConfirm:Ee,changeEmailButton:Se,analyticsContext:t,analyticsSource:se});case ue.CLAIMABLE_INFO:return i.a.createElement(M,{image:B(de.main.full),mobileImage:B(de.main.mobile),onDismiss:h,isSendingRequest:ve,email:H.email,onClickConfirm:he,onClickBack:function(){return N(ue.CHOOSE_EMAIL)},analyticsContext:t,analyticsSource:se});case ue.CONFIRMATION_EMAIL_SENT:return i.a.createElement(D,{image:B(de.email.full),mobileImage:B(de.email.mobile),onDismiss:ge,changeEmailButton:Se,email:F,analyticsContext:t,analyticsSource:se});case ue.ERROR:return i.a.createElement(q,{onDismiss:h,onClickBack:function(){return N(ue.CHOOSE_EMAIL)},analyticsContext:t,analyticsSource:se});case ue.SUCCESS:return i.a.createElement(ee,{image:B(de.success.full),mobileImage:B(de.success.mobile),onDismiss:ge,email:H.email,analyticsContext:t,analyticsSource:se});case ue.MIGRATION:return v&&i.a.createElement(d.c,{onDismiss:y,changeEmailButton:Se,hasTwoFactor:g,email:H.email,analyticsContext:t,migrationResponse:v});default:return null}};t.default=ye}}]);
//# sourceMappingURL=email-hygiene-wizard.7d5d151b8d09cfc0679c.js.map